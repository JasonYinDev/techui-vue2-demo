import{t as b}from"./themeChart-df325d8f.js";import{m as u}from"./api-0c0121c1.js";import{n as C}from"./index-2766203e.js";const D={name:"blockCenter",mixins:[b],components:{},data(){return{mapInited:!1,chartData:{alladcode:[],geoJson:{},colors:[$c.aql4,$c.cyl4,$c.rel4],mapData:{},pointData:{},sum:{},timeLine:{title:["2016","2017","2018","2019","2020","2021","2022"],titleType:"year"},nav:{data:[{code:1e5,name:"全国"}],position:{top:80,left:30}},layoutCenter:[["38%","60%"],["38%","45%"]],layoutSize:["100%","80%"]},chartOption:{update:!1}}},computed:{publicUrl(){return"./maps/"},mapCenter(){const{chartData:t}=this,{layoutCenter:o}=t;return t.nav.data[t.nav.data.length-1].name=="全国"?o[0]:o[1]},mapSize(){const{chartData:t}=this,{layoutSize:o}=t;return t.nav.data[t.nav.data.length-1].name=="全国"?o[0]:o[1]}},methods:{processTimeLine(t){const{chartData:o,chartOption:s,processTimeLine:r,getColor:l}=this,{mapData:i,pointData:e,sum:n}=o;o.timeLine.title.forEach(a=>{var m=[],d=[],p=i[a][i[a].length-1].value,h=i[a][0].value;i[a].length===1&&(p=0),i[a].forEach(c=>{m.unshift(c.name),d.unshift(c.value)}),s.options.push({title:[{left:20,top:20,text:a+t.name+"年销售额统计图(可点击下钻到县)",textStyle:{color:"rgb(179, 239, 255)",fontSize:16}},{text:"销售总额："+n[a].toFixed(2)+"万",left:20,top:50,textStyle:{color:"#FFAC50",fontSize:16}}],visualMap:{min:p,max:h,left:"3%",bottom:"5%",calculable:!0,seriesIndex:[0],inRange:{color:[l("techDecoA"),$c.hsll(l("techDecoB"),.7)]}},xAxis:{type:"value",scale:!0,position:"top",boundaryGap:!1,splitLine:{show:!1},axisTick:{show:!1},axisLabel:{margin:2,fontSize:12}},yAxis:{type:"category",nameGap:16,axisLine:{show:!0},axisTick:{show:!1},axisLabel:{interval:0},data:m},series:[{name:"散点",type:"effectScatter",coordinateSystem:"geo",rippleEffect:{number:2,scale:2.5,brushType:"stroke",period:3},itemStyle:{},data:e[a],symbolSize:c=>{c[2];var f=(30-10)/(h-p),y=30-f*h;return f*c[2]+y*.8},showEffectOn:"render"},{silent:!0,type:"bar",barGap:"-100%",barCategoryGap:"55%",itemStyle:{borderRadius:30,color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:l("techDecoA")},{offset:1,color:l("techDecoB")}])},emphasis:{focus:"self",scale:!1,itemStyle:{show:!1}},data:d}]})}),this.mapInited=!0},processOption(t){if(!t){let a=this.chartData.nav.data;t=a[a.length-1]}const{mapCenter:o,mapSize:s,chartData:r,chartOption:l,processTimeLine:i,getColor:e}=this;let n={timeline:{data:r.timeLine.title,axisType:"category",autoPlay:!0,playInterval:1e4,left:"15%",bottom:"10%",width:"50%",label:{color:e("staFC"),fontSize:16,position:"top",height:70,verticalAlign:"bottom",backgroundColor:$c.fade($c.rel5,0)},itemStyle:{color:e("techDecoB"),borderColor:e("techDecoB")},symbolSize:12,lineStyle:{color:e("techDecoB")},checkpointStyle:{borderColor:e("techDecoA"),color:e("techDecoA"),borderWidth:2},controlStyle:{showNextBtn:!0,showPrevBtn:!0,color:e("techDecoA"),borderColor:e("techDecoA")},emphasis:{itemStyle:{color:e("techDecoB"),borderColor:e("techDecoB")},label:{show:!0,color:e("staFCS"),rotate:0,fontSize:16},controlStyle:{color:e("staFCS"),borderColor:e("staFCS")}},progress:{itemStyle:{color:e("staFCW"),borderColor:e("staFCW")},label:{fontSize:14,color:e("staFCW")},controlStyle:{color:e("staFCW"),borderColor:e("staFCW")},lineStyle:{color:e("staFCW")}}},baseOption:{title:{text:t.name,left:"center"},grid:{right:"5%",top:"10%",bottom:"20%",width:"15%"},geo:{type:"map",map:t.name,roam:!0,scaleLimit:{min:.5,max:3},layoutCenter:o,layoutSize:s,label:{show:!0,color:e("actFC"),fontSize:10,formatter:a=>{switch(a.name){case"内蒙古自治区":a.name="内蒙古";break;case"西藏自治区":a.name="西藏";break;case"新疆维吾尔自治区":a.name="新疆";break;case"宁夏回族自治区":a.name="宁夏";break;case"广西壮族自治区":a.name="广西";break;case"香港特别行政区":a.name="香港";break;case"澳门特别行政区":a.name="澳门";break}return a.name}},itemStyle:{borderColor:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:e("mapBDA")},{offset:1,color:e("mapBDB")}],!1),borderWidth:1,shadowColor:e("mapSD"),shadowOffsetY:0,shadowBlur:60,areaColor:{x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:$c.fade(e("mapBGA"),.5)},{offset:1,color:$c.fade(e("mapBGB"),.5)}]}},emphasis:{label:{color:e("actFCS"),show:!0},itemStyle:{areaColor:{x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:$c.fade(e("mapBGHA"),.5)},{offset:1,color:$c.fade(e("mapBGHB"),.5)}]}}}}},options:[]};for(let a in n)l[a]=n[a];l.update=!0,i(t)},getMapData(t){const{chartData:o,processOption:s}=this;let r={},l={},i={};o.timeLine.title.forEach(e=>{r[e]=[],l[e]=[],i[e]=0,o.geoJson.features.forEach(n=>{if(n.properties.name){let a=Math.random()*3e3;r[e].push({name:n.properties.name,value:a,cityCode:parseInt(n.properties.adcode)}),n.properties.center&&l[e].push({name:n.properties.name,value:[n.properties.center[0],n.properties.center[1],a],cityCode:parseInt(n.properties.adcode)}),i[e]+=a}}),r[e]=r[e].sort(function(n,a){return a.value-n.value})}),o.mapData=r,o.pointData=l,o.sum=i,s(t)},async initChart(t){const{chartData:o,getMapData:s}=this;o.alladcode.length==0&&await u(this.publicUrl,"all.json").then(r=>{o.alladcode=r}).catch(function(r){console.error("getmap",r)}),await u(this.publicUrl,t.code+"_geojson_full.json").then(r=>{o.geoJson={...r,...t}}).catch(function(r){console.error("getmap",r)}),s(t)},mapClick(t){const{alladcode:o,initChart:s,nav:r}=this.chartData;if(r.data[r.data.length-1].name!=t.name)if(t.componentType=="geo"||t.componentType=="series"){let l=o.filter(e=>e.name===t.name)[0].adcode,i={code:l,name:t.name};r.data[r.data.length-1].name!=t.name&&(this.initChart(i),r.data.push({code:l,name:t.name}))}else t.code&&this.initChart(t)}},mounted(){const{chartData:t}=this;this.initChart(t.nav.data[0])},beforeDestroy(){},destroyed(){}};var S=function(){var o=this,s=o._self._c;return s("div",{staticClass:"map-wrap map-timeLine-bar"},[o.mapInited?s("echartsMap",{staticClass:"echarComponentAyin",attrs:{chartOption:o.chartOption,chartData:o.chartData},on:{mapClick:o.mapClick}}):o._e()],1)},g=[],v=C(D,S,g,!1,null,null,null,null);const B=v.exports;export{B as default};
