import{t as b}from"./themeChart-df325d8f.js";import{m as y}from"./api-0c0121c1.js";import{n as D}from"./index-beda625d.js";const g={name:"blockCenter",mixins:[b],components:{},data(){return{mapInited:!1,chartData:{alladcode:[],geoJson:{},colors:[$c.aql4,$c.cyl4,$c.rel4],mapData:{},pointData:{},sum:{},timeLine:{title:["2016","2017","2018","2019","2020","2021","2022"],titleType:"year"},nav:{data:[{code:21e4,name:this.$t("map.navRoot")}],position:{top:80,left:25}},layoutCenter:[["38%","60%"],["38%","45%"]],layoutSize:["100%","80%"]},chartOption:{update:!1}}},computed:{publicUrl(){return`./static/maps/${this.globalConfig.language}/`},mapCenter(){const{chartData:t}=this,{layoutCenter:a}=t;return t.nav.data[t.nav.data.length-1].name=="全国"?a[0]:a[1]},mapSize(){const{chartData:t}=this,{layoutSize:a}=t;return t.nav.data[t.nav.data.length-1].name=="全国"?a[0]:a[1]}},methods:{processTimeLine(t){const{chartData:a,chartOption:i,processTimeLine:r,getColor:n}=this,{mapData:s,pointData:e,sum:l,navDept:o}=a;a.timeLine.title.forEach(c=>{var f=[],d=[],h=s[c][s[c].length-1].value,m=s[c][0].value;s[c].length===1&&(h=0),s[c].forEach(p=>{f.unshift(p.name),d.unshift(p.value)}),i.options.push({title:[{left:20,top:20,text:c+" "+t.name+" Annual sales statistics",textStyle:{color:"rgb(179, 239, 255)",fontSize:16}},{text:"Total:"+l[c].toFixed(2)+" 10K$",left:20,top:50,textStyle:{color:"#FFAC50",fontSize:16}}],visualMap:{min:h,max:m,left:"3%",bottom:"5%",calculable:!0,seriesIndex:[0],inRange:{color:[n("techDecoA"),$c.hsll(n("techDecoB"),.7)]},textStyle:{color:"#24CFF4"}},xAxis:{type:"value",scale:!0,position:"top",boundaryGap:!1,splitLine:{show:!1},axisTick:{show:!1},axisLabel:{margin:2,fontSize:12}},yAxis:{type:"category",nameGap:16,axisLine:{show:!0},axisTick:{show:!1},axisLabel:{interval:0},data:f},series:[{name:"散点",type:"effectScatter",coordinateSystem:"geo",rippleEffect:{number:2,scale:2.5,brushType:"stroke",period:3},itemStyle:{},data:e[c],symbolSize:p=>{p[2];var u=(30-10)/(m-h),C=30-u*m;return u*p[2]+C*.8},showEffectOn:"render"},{silent:!0,type:"bar",barGap:"-100%",barCategoryGap:"55%",itemStyle:{borderRadius:30,color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:n("techDecoA")},{offset:1,color:n("techDecoB")}])},emphasis:{focus:"self",scale:!1,itemStyle:{show:!1}},data:d}]})}),this.mapInited=!0},processOption(t){if(!t){let o=this.chartData.nav.data;t=o[o.length-1]}const{mapCenter:a,mapSize:i,chartData:r,chartOption:n,processTimeLine:s,getColor:e}=this;let l={timeline:{data:r.timeLine.title,axisType:"category",autoPlay:!0,playInterval:1e4,left:"15%",bottom:"10%",width:"50%",label:{color:e("staFC"),fontSize:16,position:"top",height:70,verticalAlign:"bottom",backgroundColor:$c.fade($c.rel5,0)},itemStyle:{color:e("techDecoB"),borderColor:e("techDecoB")},symbolSize:12,lineStyle:{color:e("techDecoB")},checkpointStyle:{borderColor:e("techDecoA"),color:e("techDecoA"),borderWidth:2},controlStyle:{showNextBtn:!0,showPrevBtn:!0,color:e("techDecoA"),borderColor:e("techDecoA")},emphasis:{itemStyle:{color:e("techDecoB"),borderColor:e("techDecoB")},label:{show:!0,color:e("staFCS"),rotate:0,fontSize:16},controlStyle:{color:e("staFCS"),borderColor:e("staFCS")}},progress:{itemStyle:{color:e("staFCW"),borderColor:e("staFCW")},label:{fontSize:14,color:e("staFCW")},controlStyle:{color:e("staFCW"),borderColor:e("staFCW")},lineStyle:{color:e("staFCW")}}},baseOption:{title:{text:t.name,left:"center"},grid:{right:"5%",top:"10%",bottom:"20%",width:"15%"},geo:{type:"map",map:t.name,roam:!0,scaleLimit:{min:.5,max:3},layoutCenter:a,layoutSize:i,label:{show:!0,color:e("actFC"),fontSize:10,formatter:o=>{switch(o.name){case"内蒙古自治区":o.name="内蒙古";break;case"西藏自治区":o.name="西藏";break;case"新疆维吾尔自治区":o.name="新疆";break;case"宁夏回族自治区":o.name="宁夏";break;case"广西壮族自治区":o.name="广西";break;case"香港特别行政区":o.name="香港";break;case"澳门特别行政区":o.name="澳门";break}return o.name}},itemStyle:{borderColor:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:e("mapBDA")},{offset:1,color:e("mapBDB")}],!1),borderWidth:1,shadowColor:e("mapSD"),shadowOffsetY:0,shadowBlur:60,areaColor:{x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:$c.fade(e("mapBGA"),.5)},{offset:1,color:$c.fade(e("mapBGB"),.5)}]}},emphasis:{label:{color:e("actFCS"),show:!0},itemStyle:{areaColor:{x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:$c.fade(e("mapBGHA"),.5)},{offset:1,color:$c.fade(e("mapBGHB"),.5)}]}}}}},options:[]};for(let o in l)n[o]=l[o];n.update=!0,s(t)},getMapData(t){const{chartData:a,processOption:i}=this;let r={},n={},s={};a.timeLine.title.forEach(e=>{r[e]=[],n[e]=[],s[e]=0,a.geoJson.features.forEach(l=>{if(l.properties.name){let o=Math.random()*3e3;r[e].push({name:l.properties.name,value:o,cityCode:parseInt(l.properties.adcode)}),l.properties.center&&n[e].push({name:l.properties.name,value:[l.properties.center[0],l.properties.center[1],o],cityCode:parseInt(l.properties.adcode)}),s[e]+=o}}),r[e]=r[e].sort(function(l,o){return o.value-l.value})}),a.mapData=r,a.pointData=n,a.sum=s,i(t)},async initChart(t){const{chartData:a,getMapData:i}=this;a.alladcode.length==0&&await y(this.publicUrl,"all.json").then(r=>{a.alladcode=r}).catch(function(r){console.error("getmap",r)}),await y(this.publicUrl,t.code+"_geojson_full.json").then(r=>{a.geoJson={...r,...t}}).catch(function(r){console.error("getmap",r)}),i(t)},mapClick(t){var s;const{alladcode:a,initChart:i,nav:r}=this.chartData,n=r.data;if(n[n.length-1].name!=t.name)if(t.componentType=="geo"||t.componentType=="series"){let e=(s=a.filter(o=>o.name===t.name)[0])==null?void 0:s.adcode,l={code:e,name:t.name};n[n.length-1].name!=t.name&&n.length<2&&(this.initChart(l),n.push({code:e,name:t.name}))}else t.code&&this.initChart(t)}},mounted(){const{chartData:t}=this;this.initChart(t.nav.data[0])},beforeDestroy(){},destroyed(){}};var S=function(){var a=this,i=a._self._c;return i("div",{staticClass:"map-wrap map-timeLine-bar"},[a.mapInited?i("echartsMap",{staticClass:"echarComponentAyin",attrs:{chartOption:a.chartOption,chartData:a.chartData},on:{mapClick:a.mapClick}}):a._e()],1)},v=[],x=D(g,S,v,!1,null,null,null,null);const F=x.exports;export{F as default};
