import{t as o}from"./themeChart-df325d8f.js";import{n as h}from"./index-beda625d.js";const n={components:{},mixins:[o],data(){return{chartData:{title:"业务利润占比",colors:[$c.aql4,$c.cyl4,$c.rel5],data:[],dataMax:300},chartOption:{},dataOri:[]}},watch:{"$tState.mapData.code"(a,t){a==21e4?(this.chartData.dataMax=300,this.chartData.data=JSON.parse(this.dataOri),this.chartOption.visualMap.max=this.chartData.dataMax):(this.chartData.dataMax=0,this.mapLinkAction(this.chartData.data,3),this.chartOption.visualMap.max=this.chartData.dataMax/2),this.processData(),this.chartOption.update=!0}},computed:{},methods:{mapLinkAction(a,t){const{chartData:e}=this;a.forEach((r,s)=>{if(t==1&&r.value){let i=s*this.randomNumber(t*10,100);r.value=i,e.dataMax+=i}else r.value&&delete r.value;if(r.children&&r.children.length>0){const i=t-1;this.mapLinkAction(r.children,i)}})},initData(){this.chartData.data=[{name:this.$t("dashboardA.r3.group1.title"),children:[{name:this.$t("dashboardA.r3.group1.sub1.title"),value:123,children:[{name:this.$t("dashboardA.r3.group1.sub1.item1"),value:49},{name:this.$t("dashboardA.r3.group1.sub1.item2"),value:25},{name:this.$t("dashboardA.r3.group1.sub1.item3"),value:11}]},{name:this.$t("dashboardA.r3.group1.sub2.title"),value:90,children:[{name:this.$t("dashboardA.r3.group1.sub2.item1"),value:35},{name:this.$t("dashboardA.r3.group1.sub2.item2"),value:15}]}]},{name:this.$t("dashboardA.r3.group2.title"),children:[{name:this.$t("dashboardA.r3.group2.sub1.title"),value:230,children:[{name:this.$t("dashboardA.r3.group2.sub1.item1"),value:43},{name:this.$t("dashboardA.r3.group2.sub1.item2"),value:121}]},{name:this.$t("dashboardA.r3.group2.sub2.title"),value:55,children:[{name:this.$t("dashboardA.r3.group2.sub2.item1"),value:23},{name:this.$t("dashboardA.r3.group2.sub2.item2"),value:12}]}]}],this.dataOri=JSON.stringify(this.chartData.data)},processData(){const{getColor:a}=this,{colors:t,data:e}=this.chartData;let r=[];r.push({type:"sunburst",data:e,radius:[20,"80%"],center:["53%","53%"],itemStyle:{borderRadius:7,borderWidth:2,borderColor:a("techBG")},label:{show:!0,color:a("staFCS"),fontSize:12,rotate:"tangential"},emphasis:{label:{show:!0,fontSize:"16",color:$c.wh,formatter:function(s){return s.name+`
`+s.value}}},levels:[{}]}),this.chartOption.series=r},processOption(){const{getColor:a}=this,{dataMax:t,colors:e}=this.chartData;this.chartOption={update:!1,title:{text:this.$t("dashboardA.r3.tip"),subtext:"",x:20,bottom:0,textStyle:{color:a("staFCW"),fontSize:12,fontWeight:"normal"}},visualMap:{type:"continuous",left:10,bottom:40,min:0,max:t,inRange:{color:e}},series:[]},this.processData()},chartTheme(){const{chartData:a,getPalette:t,oriColors:e}=this;a.colors=t({total:8,actual:3,pickType:"seq",extra:["darken",1]})}},mounted(){this.initData(),this.processOption()}};var l=function(){var t=this,e=t._self._c;return e("echartsInit",{attrs:{chartOption:t.chartOption}})},c=[],u=h(n,l,c,!1,null,null,null,null);const m=u.exports;export{m as default};
