import{n as w,_}from"./index-e5c47b2c.js";import{t as x}from"./themeChart-df325d8f.js";import{m as g}from"./api-0c0121c1.js";const S={0:"path://m569.52,440.01c18.46,31.99-4.71,71.99-41.58,71.99H48.05c-36.94,0-60-40.05-41.58-71.99L246.42,23.99c18.47-32.01,64.72-31.95,83.15,0l239.94,416.03h0Zm-281.52-86.01c-25.4,0-46,20.6-46,46s20.6,46,46,46,46-20.6,46-46-20.6-46-46-46Zm-43.67-165.35l7.42,136c.35,6.36,5.61,11.35,11.98,11.35h48.55c6.37,0,11.64-4.98,11.98-11.35l7.42-136c.38-6.87-5.1-12.65-11.98-12.65h-63.38c-6.88,0-12.36,5.78-11.98,12.65h0Z"},z={mixins:[x],components:{mapPopover:()=>_(()=>import("./map-popover-alt-f8873a00.js"),["assets/map-popover-alt-f8873a00.js","assets/index-e5c47b2c.js","assets/index-ff56af40.css","assets/map-popover-alt-a3f4dac0.css"])},data(){return{mapInited:!1,view:{data:[{title:"数据A分布",label:"data1"},{title:"数据B分布",label:"data2"}],current:"data1"},chartData:{alladcode:[],geoJson:{},chinaJson:{},visualMapColors:[$c.bll9,$c.inr5],mapData:[],pointData:[],pinData:[],circleData:[],warningData:[],dangerData:[],sum:0,nav:{data:[{code:1e5,name:"全国"}],show:!1},maxData:1e3,minData:0,maxPin:75,minPin:30,layoutCenter:[["90%","90%"],["50%","50%"]],layoutSize:["500%","80%"],visualMapPos:{right:"10.5%",bottom:"5%"}},chartOption:{update:!1},clickData:{show:!1,area:"北京",data:"325",info:"文字信息",x:120,y:120}}},computed:{publicUrl(){return"./maps/"},pinColor(){const{view:t}=this;if(t.current=="data1")return[$c.aql2,$c.cyl5,$c.cyl9];if(t.current=="data2")return[$c.cyl3,$c.cbl4,$c.bll9];if(t.current=="data3")return[$c.orl3,$c.rel5,$c.wh];if(t.current=="data4")return[$c.pul3,$c.inl6,$c.wh]},mapCenter(){const{chartData:t}=this,{layoutCenter:a}=t;return t.nav.data[t.nav.data.length-1].name=="全国"?a[0]:a[1]},mapSize(){const{chartData:t}=this,{layoutSize:a}=t;return t.nav.data[t.nav.data.length-1].name=="全国"?a[0]:a[1]}},watch:{},methods:{changeView(t){let a=this.chartData.nav.data;this.view.current=t.label,this.clickData.show=!1,this.getMapData(a[a.length-1])},processMapData(t){const{chartData:a,chartOption:i,processTimeLine:e,getColor:r}=this,{mapData:c,pointData:l,pinData:p,circleData:m,warningData:n,dangerData:y,sum:v,navDept:b,maxData:D,minData:s,maxPin:d,minPin:f}=a;let u=[];u.push({data:l,geoIndex:0,type:"map"},{symbolSize:5,label:{position:"center",align:"center",show:!0,color:$c.fade(r("staFCS"),.3),fontSize:12,formatter:function(o){return o.data.name}},emphasis:{label:{show:!0,fontSize:14,color:r("staFCS"),fontWeight:"bold"}},symbolOffset:[0,-10],itemStyle:{color:"#fff"},name:"light",type:"scatter",coordinateSystem:"geo",zlevel:2,data:l},{type:"scatter",symbol:"circle",coordinateSystem:"geo",symbolOffset:[0,-10],large:!0,label:{show:!1},emphasis:{label:{fontSize:14,color:this.pinColor[2],fontWeight:"bold"}},itemStyle:{color:$c.darken(this.pinColor[1],1)},symbolSize:15,data:m,zlevel:2},{type:"scatter",symbol:"pin",coordinateSystem:"geo",symbolOffset:[0,-10],large:!0,label:{show:!0,position:"inside",align:"center",color:this.pinColor[2],fontSize:10,formatter:o=>o.data.value[2].toString().length>4?(o.data.value[2]/1e4).toFixed(0)+"万":o.data.value[2]},emphasis:{label:{fontSize:14,color:this.pinColor[2],fontWeight:"bold"}},itemStyle:{color:{type:"radial",x:.3,y:.3,r:.5,colorStops:[{offset:0,color:this.pinColor[0]},{offset:1,color:this.pinColor[1]}],global:!1}},symbolSize:o=>{var h=(d-f)/(D-s),C=d-h*s;return C=d-h*D,h*o[2]+C*1.3},data:p,zlevel:2},{type:"scatter",symbol:S[0],coordinateSystem:"geo",symbolOffset:[0,-10],label:{show:!1},itemStyle:{color:{type:"radial",x:.3,y:.3,r:.5,colorStops:[{offset:0,color:$c.yel1},{offset:1,color:$c.yel6}],global:!1}},symbolSize:24,emphasis:{scale:1.5},data:n,zlevel:2},{type:"scatter",symbol:S[0],coordinateSystem:"geo",symbolOffset:[0,-10],label:{show:!1},itemStyle:{color:{type:"radial",x:.3,y:.3,r:.5,colorStops:[{offset:0,color:$c.rel3},{offset:1,color:$c.rel5}],global:!1}},symbolSize:24,emphasis:{scale:1.5},data:y,zlevel:2}),i.series=u,this.mapInited=!0},processOption(t){if(!t){let n=this.chartData.nav.data;t=n[n.length-1]}const{mapCenter:a,mapSize:i,chartData:e,chartOption:r,processMapData:c,getColor:l}=this,{visualMapPos:p}=e;let m={title:{show:!1,text:t.name,left:"center"},geo:{type:"map",map:t.name,roam:!0,scaleLimit:{min:.5,max:3},layoutCenter:a,layoutSize:i,zlevel:1,label:{show:!1,color:l("actFC"),fontSize:12,formatter:n=>n.name},itemStyle:{borderWidth:1,shadowOffsetY:0,areaColor:$c.fade(l("mapBGB"),.7)},select:{label:{color:l("actFCS"),fontSize:14},itemStyle:{areaColor:l("mapBGHA")}},emphasis:{label:{color:l("actFCS"),fontSize:14,show:!0},itemStyle:{areaColor:l("mapBGHA")}}},series:[]};m.visualMap={type:"continuous",right:p.right,bottom:p.bottom,min:0,max:e.maxData,seriesIndex:0,orient:"horizontal",inRange:{color:e.visualMapColors},textStyle:{color:l("staFC")},calculable:!0};for(let n in m)r[n]=m[n];r.update=!0,c(t)},getMapData(t){const{chartData:a,processOption:i}=this;let e=[],r=[],c=[],l=[],p=[],m=[],n=0,y=[3,7,9,18,21],v=[12,16],b=[5];(a.nav.data[a.nav.data.length-1].name=="全国"?a.chinaJson:a.geoJson).features.forEach((s,d)=>{if(s.properties.center){let f=this.randomNumber(1,a.maxData/3),u=this.randomNumber(a.maxData/2,a.maxData),o=s.geometry.coordinates[0][0][0];if(o){if(y.includes(d)){let h={name:s.properties.name,value:[o[0],o[1],u],cityCode:parseInt(s.properties.adcode)};c.push(h),r.push(h)}else{f<100&&(f=0);let h={name:s.properties.name,value:[o[0],o[1],f],cityCode:parseInt(s.properties.adcode)};r.push(h),l.push(h)}v.includes(d)&&p.push({name:s.properties.name,value:[o[0],o[1]-1,"warning",this.$t("map.popover.warning")],cityCode:parseInt(s.properties.adcode)}),b.includes(d)&&m.push({name:s.properties.name,value:[o[0],o[1]-1,"danger",this.$t("map.popover.danger")],cityCode:parseInt(s.properties.adcode)})}n+=f}}),a.mapData=e,a.pointData=r,a.pinData=c,a.circleData=l,a.warningData=p,a.dangerData=m,a.sum=n,i(t)},async initChart(t){const{chartData:a,getMapData:i}=this;a.alladcode.length==0&&await g(this.publicUrl,"all.json").then(e=>{a.alladcode=e}).catch(function(e){console.error("getmap",e)}),await g(this.publicUrl,t.code+"_geojson_full.json").then(e=>{a.geoJson={...e,...t}}).catch(function(e){console.error("getmap",e)}),a.nav.data[a.nav.data.length-1].name=="全国"&&await g(this.publicUrl,"world-china.json").then(e=>{a.chinaJson=JSON.parse(JSON.stringify(a.geoJson));let r=e.features.concat(a.geoJson.features);a.geoJson.features=r}).catch(function(e){console.error("getmap",e)}),i(t)},mapAction(t){const{clickData:a}=this;a.show=!1},mapClick(t){var l;const{clickData:a}=this,{alladcode:i,initChart:e,nav:r}=this.chartData,c=r.data;if(a.show=!1,c[c.length-1].name!=t.name)if(t.componentType=="geo"||t.componentType=="series"&&t.componentSubType=="map"&&t.value){let p=(l=i.filter(n=>n.name===t.name)[0])==null?void 0:l.adcode,m={code:p,name:t.name};c[c.length-1].name!=t.name&&c.length<2&&(this.initChart(m),c.push({code:p,name:t.name}))}else t.code&&this.initChart(t);t.componentType=="series"&&t.componentSubType=="scatter"&&(a.area=t.name,a.data=t.data.value[2],a.x=t.domPosition[0],a.y=t.domPosition[1],a.show=!0,(t.value[2]=="warning"||t.value[2]=="danger")&&(a.info=t.data.value[3]))},chartTheme(){let t=this.themePalette.chart.visual;this.chartData.visualMapColors=this.getPalette({total:7,actual:4,palette:t})}},mounted(){const{chartData:t}=this;this.initChart(t.nav.data[0])},beforeDestroy(){},destroyed(){}};var $=function(){var a=this,i=a._self._c;return i("div",{staticClass:"dashboard1080pAG-map-chinaOnWorld"},[i("mapPopover",{attrs:{clickData:a.clickData}}),a.mapInited?i("echartsMap",{staticClass:"echartsMap",attrs:{chartOption:a.chartOption,chartData:a.chartData},on:{mapClick:a.mapClick,mapAction:a.mapAction}}):a._e()],1)},O=[],J=w(z,$,O,!1,null,null,null,null);const k=J.exports;export{k as default};
