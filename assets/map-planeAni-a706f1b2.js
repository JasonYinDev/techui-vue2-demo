import{n as m,_ as h}from"./index-e5c47b2c.js";import{t as d}from"./themeChart-df325d8f.js";import{m as p}from"./api-0c0121c1.js";let f="path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z";const u={name:"blockCenter",mixins:[d],components:{mapPopover:()=>h(()=>import("./map-popover-738d2006.js"),["assets/map-popover-738d2006.js","assets/index-e5c47b2c.js","assets/index-ff56af40.css","assets/map-popover-38cd7e0b.css"])},data(){return{mapInited:!1,chartData:{alladcode:[],geoJson:{},visualMapColors:[$c.cyA16,$c.cbA17,$c.blA18],mapData:[],lineData:[],nav:{data:[{code:1e5,name:"全国"}],position:{top:80,left:30}},layoutCenter:[["50%","66%"],["50%","50%"]],layoutSize:["100%","80%"]},chartOption:{update:!1},clickData:{show:!1,area:"北京",data:"325",x:120,y:120}}},computed:{publicUrl(){return"./maps/"},mapCenter(){const{chartData:a}=this,{layoutCenter:e}=a;return a.nav.data[a.nav.data.length-1].name=="全国"?e[0]:e[1]},mapSize(){const{chartData:a}=this,{layoutSize:e}=a;return a.nav.data[a.nav.data.length-1].name=="全国"?e[0]:e[1]}},methods:{processMapData(a){const{chartData:e,chartOption:n,processTimeLine:r}=this,{mapData:s,pointData:l,lineData:o,sum:i,maxData:t,minData:c,maxPin:v,minPin:C}=e;n.series=[{name:" Top3",type:"lines",zlevel:2,symbol:["none","circle"],symbolSize:10,effect:{show:!0,period:6,trailLength:0,symbol:f,symbolSize:30},lineStyle:{color:$c.fade("wh",.5),width:2,opacity:.6,curveness:.2},data:o}],this.mapInited=!0},processOption(a){if(!a){let t=this.chartData.nav.data;a=t[t.length-1]}const{mapCenter:e,mapSize:n,chartData:r,chartOption:s,processMapData:l,getColor:o}=this;let i={title:{show:!1,text:a.name,left:"center"},geo:{type:"map",map:a.name,roam:!0,scaleLimit:{min:.5,max:5},layoutCenter:e,layoutSize:n,zlevel:1,label:{show:!0,color:o("actFC"),fontSize:12,formatter:t=>{switch(t.name){case"内蒙古自治区":t.name="内蒙古";break;case"西藏自治区":t.name="西藏";break;case"新疆维吾尔自治区":t.name="新疆";break;case"宁夏回族自治区":t.name="宁夏";break;case"广西壮族自治区":t.name="广西";break;case"香港特别行政区":t.name="香港";break;case"澳门特别行政区":t.name="澳门";break}return t.name}},itemStyle:{borderColor:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:o("mapBDA")},{offset:1,color:o("mapBDB")}],!1),borderWidth:1,shadowColor:o("mapSD"),shadowOffsetY:0,shadowBlur:20,areaColor:{x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:$c.fade(o("mapBGA"),.5)},{offset:1,color:$c.fade(o("mapBGB"),.5)}]}},emphasis:{label:{color:o("actFCS"),fontSize:14,show:!0},itemStyle:{areaColor:{x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:$c.fade(o("mapBGHA"),.5)},{offset:1,color:$c.fade(o("mapBGHB"),.5)}]}}}},series:[]};for(let t in i)s[t]=i[t];s.update=!0,l(a)},getMapData(a){const{chartData:e,processOption:n}=this;let r=[],s=[],l=0;e.geoJson.features.forEach((o,i)=>{if(e.geoJson.features.forEach(t=>{let c=(Math.random()*500).toFixed(0);o.properties.center&&t.properties.center&&o.properties.name&&t.properties.name&&o.properties.name!=t.properties.name&&i==1&&s.push({coords:[o.properties.center,t.properties.center],fromName:o.properties.name,toName:t.properties.name,value:c})}),o.properties.name){let t=(Math.random()*500).toFixed(0);r.push({name:o.properties.name,value:t,cityCode:parseInt(o.properties.adcode)})}}),e.mapData=r,e.lineData=s,e.sum=l,n(a)},async initChart(a){const{chartData:e,getMapData:n}=this;e.alladcode.length==0&&await p(this.publicUrl,"all.json").then(r=>{e.alladcode=r}).catch(function(r){console.error("getmap",r)}),await p(this.publicUrl,a.code+"_geojson_full.json").then(r=>{e.geoJson={...r,...a}}).catch(function(r){console.error("getmap",r)}),n(a)},mapAction(a){const{clickData:e}=this;e.show=!1},mapClick(a){const{clickData:e}=this,{alladcode:n,initChart:r,nav:s}=this.chartData;if(e.show=!1,s.data[s.data.length-1].name!=a.name)if(a.componentType=="geo"){let l=n.filter(i=>i.name===a.name)[0].adcode,o={code:l,name:a.name};s.data[s.data.length-1].name!=a.name&&(this.initChart(o),s.data.push({code:l,name:a.name}))}else a.code&&this.initChart(a);a.componentType=="series"&&(e.area=a.name,e.data=a.data.value[2],e.x=a.domPosition[0],e.y=a.domPosition[1],e.show=!0)}},mounted(){const{chartData:a}=this;this.initChart(a.nav.data[0])},beforeDestroy(){},destroyed(){}};var D=function(){var e=this,n=e._self._c;return n("div",{staticClass:"map-wrap map-simple"},[e.mapInited?n("echartsMap",{staticClass:"echartMap",attrs:{chartOption:e.chartOption,chartData:e.chartData},on:{mapClick:e.mapClick,mapAction:e.mapAction}}):e._e(),n("mapPopover",{attrs:{clickData:e.clickData}})],1)},_=[],y=m(u,D,_,!1,null,null,null,null);const k=y.exports;export{k as default};
