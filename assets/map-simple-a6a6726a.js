import{n as S,_ as b}from"./index-beda625d.js";import{t as w}from"./themeChart-df325d8f.js";import{m as _}from"./api-0c0121c1.js";const C={0:"path://m569.52,440.01c18.46,31.99-4.71,71.99-41.58,71.99H48.05c-36.94,0-60-40.05-41.58-71.99L246.42,23.99c18.47-32.01,64.72-31.95,83.15,0l239.94,416.03h0Zm-281.52-86.01c-25.4,0-46,20.6-46,46s20.6,46,46,46,46-20.6,46-46-20.6-46-46-46Zm-43.67-165.35l7.42,136c.35,6.36,5.61,11.35,11.98,11.35h48.55c6.37,0,11.64-4.98,11.98-11.35l7.42-136c.38-6.87-5.1-12.65-11.98-12.65h-63.38c-6.88,0-12.36,5.78-11.98,12.65h0Z"},x={mixins:[w],components:{mapPopover:()=>b(()=>import("./map-popover-0ed2da36.js"),["assets/map-popover-0ed2da36.js","assets/index-beda625d.js","assets/index-c2c9ef50.css","assets/map-popover-eed5a7f6.css"]),mapCounter:()=>b(()=>import("./map-counter-15bea23c.js"),["assets/map-counter-15bea23c.js","assets/index-beda625d.js","assets/index-c2c9ef50.css","assets/map-counter-ae586efc.css"]),echartPieMini:()=>b(()=>import("./echarts-PieMini-c7b96e1f.js"),["assets/echarts-PieMini-c7b96e1f.js","assets/themeChart-df325d8f.js","assets/index-beda625d.js","assets/index-c2c9ef50.css","assets/echarts-PieMini-7c053a0b.css"]),mapViewToggle:()=>b(()=>import("./map-viewToggle-d186abf2.js"),["assets/map-viewToggle-d186abf2.js","assets/index-beda625d.js","assets/index-c2c9ef50.css","assets/map-viewToggle-3cf6660a.css"])},data(){return{mapInited:!1,view:{data:[{title:"dataA分布",label:"data1"},{title:"dataB分布",label:"data2"}],current:"data1"},chartData:{alladcode:[],geoJson:{},visualMapColors:[$c.bll9,$c.inr5],mapData:[],pointData:[],pinData:[],circleData:[],warningData:[],dangerData:[],sum:0,nav:{data:[{code:21e4,name:this.$t("map.navRoot")}],position:{top:"18%",left:"27.5%"}},maxData:1e3,minData:0,maxPin:75,minPin:30,layoutCenter:[["50%","70%"],["50%","55%"]],layoutSize:["95%","85%"],visualMapPos:{right:"26.5%",bottom:"5%"}},chartOption:{update:!1},clickData:{show:!1,area:"北京",data:"325",info:"文字信息",x:120,y:120}}},computed:{publicUrl(){return`./static/maps/${this.globalConfig.language}/`},pinColor(){const{view:t}=this;if(t.current=="data1")return[$c.aql2,$c.cyl5,$c.cyl9];if(t.current=="data2")return[$c.cyl3,$c.cbl4,$c.bll9];if(t.current=="data3")return[$c.orl3,$c.rel5,$c.wh];if(t.current=="data4")return[$c.pul3,$c.inl6,$c.wh]},mapCenter(){const{chartData:t}=this,{layoutCenter:e}=t;return t.nav.data[t.nav.data.length-1].name=="全国"?e[0]:e[1]},mapSize(){const{chartData:t}=this,{layoutSize:e}=t;return t.nav.data[t.nav.data.length-1].name=="全国"?e[0]:e[1]}},watch:{},methods:{changeView(t){let e=this.chartData.nav.data;this.view.current=t.label,this.clickData.show=!1,this.getMapData(e[e.length-1])},processMapData(t){const{chartData:e,chartOption:i,processTimeLine:r}=this,{mapData:m,pointData:n,pinData:o,circleData:c,warningData:p,dangerData:l,sum:f,navDept:g,maxData:D,minData:a,maxPin:h,minPin:d}=e;let v=[];v.push({data:n,geoIndex:0,type:"map"},{symbolSize:5,emphasis:{label:{show:!1}},label:{formatter:s=>{var u,y;return(y=(u=s.data)==null?void 0:u.name)==null?void 0:y.replace(/省|壮族自治区|回族自治区|维吾尔自治区|自治区|市|县|自治县|特别行政区|区/,"")},position:"center",align:"center",show:!1,color:$c.wh,fontSize:12},symbolOffset:[0,-10],itemStyle:{color:"#fff"},name:"light",type:"scatter",coordinateSystem:"geo",zlevel:2,data:n},{type:"scatter",symbol:"circle",coordinateSystem:"geo",symbolOffset:[0,-10],large:!0,label:{show:!1},emphasis:{label:{fontSize:14,color:this.pinColor[2],fontWeight:"bold"}},itemStyle:{color:$c.darken(this.pinColor[1],1)},symbolSize:15,data:c,zlevel:2},{type:"scatter",symbol:"pin",coordinateSystem:"geo",symbolOffset:[0,-10],large:!0,label:{show:!0,position:"inside",align:"center",color:this.pinColor[2],fontSize:10,formatter:s=>s.data.value[2].toString().length>4?(s.data.value[2]/1e4).toFixed(0)+"万":s.data.value[2]},emphasis:{label:{fontSize:14,color:this.pinColor[2],fontWeight:"bold"}},itemStyle:{color:{type:"radial",x:.3,y:.3,r:.5,colorStops:[{offset:0,color:this.pinColor[0]},{offset:1,color:this.pinColor[1]}],global:!1}},symbolSize:s=>{var u=(h-d)/(D-a),y=h-u*a;return y=h-u*D,u*s[2]+y*1.3},data:o,zlevel:2},{type:"scatter",symbol:C[0],coordinateSystem:"geo",symbolOffset:[0,-10],label:{show:!1},itemStyle:{color:{type:"radial",x:.3,y:.3,r:.5,colorStops:[{offset:0,color:$c.yel1},{offset:1,color:$c.yel6}],global:!1}},symbolSize:24,emphasis:{scale:1.5},data:p,zlevel:2},{type:"scatter",symbol:C[0],coordinateSystem:"geo",symbolOffset:[0,-10],label:{show:!1},itemStyle:{color:{type:"radial",x:.3,y:.3,r:.5,colorStops:[{offset:0,color:$c.rel3},{offset:1,color:$c.rel5}],global:!1}},symbolSize:24,emphasis:{scale:1.5},data:l,zlevel:2}),i.series=v,this.mapInited=!0},processOption(t){if(!t){let l=this.chartData.nav.data;t=l[l.length-1]}const{mapCenter:e,mapSize:i,chartData:r,chartOption:m,processMapData:n,getColor:o}=this,{visualMapPos:c}=r;let p={title:{show:!1,text:t.name,left:"center"},geo:{type:"map",map:t.name,roam:!0,scaleLimit:{min:.5,max:3},layoutCenter:e,layoutSize:i,zlevel:1,label:{show:!0,color:o("actFC"),fontSize:12,formatter:l=>{var f;return(f=l==null?void 0:l.name)==null?void 0:f.replace(/省|壮族自治区|回族自治区|维吾尔自治区|自治区|市|县|自治县|特别行政区|区/,"")}},itemStyle:{borderColor:o("mapBGHA"),borderWidth:1,shadowColor:o("mapSD"),shadowOffsetY:0,shadowBlur:10},select:{label:{color:o("actFCS"),fontSize:14},itemStyle:{areaColor:o("mapBGHA")}},emphasis:{label:{color:o("actFCS"),fontSize:14,show:!0},itemStyle:{areaColor:o("mapBGHA")}}},series:[]};p.visualMap={type:"continuous",right:c.right,bottom:c.bottom,min:0,max:r.maxData,seriesIndex:0,orient:"horizontal",inRange:{color:r.visualMapColors},textStyle:{color:o("staFC")},calculable:!0};for(let l in p)m[l]=p[l];m.update=!0,n(t)},getMapData(t){const{chartData:e,processOption:i}=this;let r=[],m=[],n=[],o=[],c=[],p=[],l=0,f=[3,7,9,18,21],g=[12,16],D=[5];e.geoJson.features.forEach((a,h)=>{if(a.properties.name){let d=this.randomNumber(1,e.maxData/3),v=this.randomNumber(e.maxData/2,e.maxData);if(a.properties.center){if(f.includes(h)){let s={name:a.properties.name,value:[a.properties.center[0],a.properties.center[1],v],cityCode:parseInt(a.properties.adcode)};n.push(s),m.push(s)}else{d<100&&(d=0);let s={name:a.properties.name,value:[a.properties.center[0],a.properties.center[1],d],cityCode:parseInt(a.properties.adcode)};m.push(s),o.push(s)}g.includes(h)&&c.push({name:a.properties.name,value:[a.properties.center[0],a.properties.center[1]-.3,"warning",this.$t("map.popover.warning")],cityCode:parseInt(a.properties.adcode)}),D.includes(h)&&p.push({name:a.properties.name,value:[a.properties.center[0],a.properties.center[1]-.1,"danger",this.$t("map.popover.danger")],cityCode:parseInt(a.properties.adcode)})}l+=d}}),e.mapData=r,e.pointData=m,e.pinData=n,e.circleData=o,e.warningData=c,e.dangerData=p,e.sum=l,i(t)},async initChart(t){const{chartData:e,getMapData:i}=this;e.alladcode.length==0&&await _(this.publicUrl,"all.json").then(r=>{e.alladcode=r}).catch(function(r){console.error("getmap",r)}),await _(this.publicUrl,t.code+"_geojson_full.json").then(r=>{this.$tState.mapData.code=t.code,this.$tState.mapData.name=t.name,e.geoJson={...r,...t}}).catch(function(r){console.error("getmap",r)}),i(t)},mapAction(t){const{clickData:e}=this;e.show=!1},mapClick(t){var o;const{clickData:e}=this,{alladcode:i,initChart:r,nav:m}=this.chartData,n=m.data;if(e.show=!1,n[n.length-1].name!=t.name)if(t.componentType=="geo"||t.componentType=="series"&&t.componentSubType=="map"){let c=(o=i.filter(l=>l.name===t.name)[0])==null?void 0:o.adcode;console.log("regionCode",c);let p={code:c,name:t.name};n[n.length-1].name!=t.name&&n.length<2&&(this.initChart(p),n.push({code:c,name:t.name}))}else t.code&&this.initChart(t);t.componentType=="series"&&t.componentSubType=="scatter"&&(e.area=t.name,e.data=t.data.value[2],e.x=t.domPosition[0],e.y=t.domPosition[1],e.show=!0,(t.value[2]=="warning"||t.value[2]=="danger")&&(e.info=t.data.value[3]))},chartTheme(){let t=this.themePalette.chart.visual;this.chartData.visualMapColors=this.getPalette({total:7,actual:4,palette:t})}},mounted(){const{chartData:t}=this;this.initChart(t.nav.data[0])},beforeDestroy(){},destroyed(){}};var $=function(){var e=this,i=e._self._c;return i("div",{staticClass:"dashboard1080pAG-map"},[i("echartPieMini"),i("mapCounter"),i("mapPopover",{attrs:{clickData:e.clickData}}),e.mapInited?i("echartsMap",{staticClass:"echartsMap",attrs:{chartOption:e.chartOption,chartData:e.chartData},on:{mapClick:e.mapClick,mapAction:e.mapAction}}):e._e()],1)},z=[],P=S(x,$,z,!1,null,null,null,null);const A=P.exports;export{A as default};
